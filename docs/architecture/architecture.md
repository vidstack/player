# Architecture

## Overview

The following is a simple overview of the top-level architecture.

[![](https://mermaid.ink/img/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIE1lZGlhUHJvdmlkZXJ-RW5naW5lVHlwZX4ge1xuICAgICtwYXVzZWQ6IGJvb2xlYW5cbiAgICArdm9sdW1lOiBudW1iZXJcbiAgICArY3VycmVudFRpbWU6IG51bWJlclxuICAgICttZWRpYVR5cGU6IE1lZGlhVHlwZVxuICAgICt2aWV3VHlwZTogVmlld1R5cGVcbiAgICArZW5naW5lOiBFbmdpbmVUeXBlXG4gICAgLi4uXG4gICAgK3BsYXkoKSBQcm9taXNlfnZvaWR-IFxuICAgICtwYXVzZSgpIFByb21pc2V-dm9pZH4gXG59XG5cbk1lZGlhUHJvdmlkZXIgLS0gVmlld1R5cGVcbk1lZGlhUHJvdmlkZXIgLS0gTWVkaWFUeXBlXG5NZWRpYVByb3ZpZGVyIC0tPiBFbmdpbmU6IGhhc1xuXG5jbGFzcyBQbGF5ZXJDb250ZXh0XG5NZWRpYVByb3ZpZGVyLS0-IFBsYXllckNvbnRleHQ6IHByb3ZpZGVzXG5cbmNsYXNzIFBsYXllclByb3BzIHtcbiAgICA8PGludGVyZmFjZT4-XG4gICAgcGF1c2VkOiBib29sZWFuO1xuICAgIGN1cnJlbnRUaW1lOiBudW1iZXJcbiAgICB2b2x1bWU6IG51bWJlclxuICAgIC4uLlxufVxuXG5NZWRpYVByb3ZpZGVyIC0tPiBQbGF5ZXJQcm9wczogaW1wbGVtZW50c1xuUGxheWVyQ29udGV4dCAtLT4gUGxheWVyUHJvcHM6IGV4dGVuZHNcblxuY2xhc3MgTWVkaWFUeXBlIHtcbiAgICA8PGVudW1lcmF0aW9uPj5cbiAgICBBVURJT1xuICAgIFZJREVPXG59XG5cbmNsYXNzIFZpZXdUeXBlIHtcbiAgICA8PGVudW1lcmF0aW9uPj5cbiAgICBBVURJT1xuICAgIFZJREVPXG59XG5cblxuVUkgLS0-IFBsYXllckNvbnRleHQ6IGNvbnN1bWVzIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIE1lZGlhUHJvdmlkZXJ-RW5naW5lVHlwZX4ge1xuICAgICtwYXVzZWQ6IGJvb2xlYW5cbiAgICArdm9sdW1lOiBudW1iZXJcbiAgICArY3VycmVudFRpbWU6IG51bWJlclxuICAgICttZWRpYVR5cGU6IE1lZGlhVHlwZVxuICAgICt2aWV3VHlwZTogVmlld1R5cGVcbiAgICArZW5naW5lOiBFbmdpbmVUeXBlXG4gICAgLi4uXG4gICAgK3BsYXkoKSBQcm9taXNlfnZvaWR-IFxuICAgICtwYXVzZSgpIFByb21pc2V-dm9pZH4gXG59XG5cbk1lZGlhUHJvdmlkZXIgLS0gVmlld1R5cGVcbk1lZGlhUHJvdmlkZXIgLS0gTWVkaWFUeXBlXG5NZWRpYVByb3ZpZGVyIC0tPiBFbmdpbmU6IGhhc1xuXG5jbGFzcyBQbGF5ZXJDb250ZXh0XG5NZWRpYVByb3ZpZGVyLS0-IFBsYXllckNvbnRleHQ6IHByb3ZpZGVzXG5cbmNsYXNzIFBsYXllclByb3BzIHtcbiAgICA8PGludGVyZmFjZT4-XG4gICAgcGF1c2VkOiBib29sZWFuO1xuICAgIGN1cnJlbnRUaW1lOiBudW1iZXJcbiAgICB2b2x1bWU6IG51bWJlclxuICAgIC4uLlxufVxuXG5NZWRpYVByb3ZpZGVyIC0tPiBQbGF5ZXJQcm9wczogaW1wbGVtZW50c1xuUGxheWVyQ29udGV4dCAtLT4gUGxheWVyUHJvcHM6IGV4dGVuZHNcblxuY2xhc3MgTWVkaWFUeXBlIHtcbiAgICA8PGVudW1lcmF0aW9uPj5cbiAgICBBVURJT1xuICAgIFZJREVPXG59XG5cbmNsYXNzIFZpZXdUeXBlIHtcbiAgICA8PGVudW1lcmF0aW9uPj5cbiAgICBBVURJT1xuICAgIFZJREVPXG59XG5cblxuVUkgLS0-IFBsYXllckNvbnRleHQ6IGNvbnN1bWVzIiwibWVybWFpZCI6eyJ0aGVtZSI6ImRlZmF1bHQifSwidXBkYXRlRWRpdG9yIjpmYWxzZX0)

## Update Flow

The following uses setting the `paused` property to `false` as an example to show how updates flow
through Provider (eg: `vds-video`), Engine (eg: `HTMLMediaElement`), Context (eg: `PlayerContext`),
and UI (eg: `vds-playback-toggle`).

[![](https://mermaid.ink/img/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYWx0IFByb3ZpZGVyIFVwZGF0ZVxuICAgICAgICByZWN0IHJnYigwLCAyNTUsIDAsIC4xKVxuICAgICAgICBQcm92aWRlciAtPj4gRW5naW5lOiBMaXN0ZW4gdG8gYHBsYXlgIGV2ZW50XG4gICAgICAgIEVuZ2luZSAtLT4-IFByb3ZpZGVyOiBGaXJlcyBgcGxheWAgZXZlbnRcbiAgICAgICAgUHJvdmlkZXIgLT4-IENvbnRleHQ6IFVwZGF0ZVxuICAgICAgICBDb250ZXh0IC0tPj4gVUk6IGBDb250ZXh0VXBkYXRlYFxuICAgICAgICBVSSAtPj4gVUk6IFRyaWdnZXIgYHJlbmRlcigpYFxuICAgICAgICBlbmRcbiAgICBlbHNlIFVJIFVwZGF0ZVxuICAgICAgICByZWN0IHJnYmEoMCwgMCwgMjU1LCAuMSlcbiAgICAgICAgUHJvdmlkZXIgLT4-IEVuZ2luZTogTGlzdGVuIHRvIGBwbGF5YCBldmVudFxuICAgICAgICBQcm92aWRlciAtPj4gUHJvdmlkZXI6IExpc3RlbiBmb3IgYFVzZXJQbGF5RXZlbnRgIGV2ZW50XG4gICAgICAgIFVJIC0tPj4gUHJvdmlkZXI6IEZpcmVzIGBVc2VyUGxheUV2ZW50YFxuICAgICAgICBQcm92aWRlciAtPj4gRW5naW5lOiBzZXRQYXVzZWQoZmFsc2UpXG4gICAgICAgIEVuZ2luZSAtLT4-IFByb3ZpZGVyOiBGaXJlcyBgcGxheWAgZXZlbnRcbiAgICAgICAgUHJvdmlkZXIgLT4-IENvbnRleHQ6IFVwZGF0ZVxuICAgICAgICBDb250ZXh0IC0tPj4gVUk6IGBDb250ZXh0VXBkYXRlYFxuICAgICAgICBVSSAtPj4gVUk6IFRyaWdnZXIgYHJlbmRlcigpYFxuICAgICAgICBlbmRcbiAgICBlbmQiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoic2VxdWVuY2VEaWFncmFtXG4gICAgYWx0IFByb3ZpZGVyIFVwZGF0ZVxuICAgICAgICByZWN0IHJnYigwLCAyNTUsIDAsIC4xKVxuICAgICAgICBQcm92aWRlciAtPj4gRW5naW5lOiBMaXN0ZW4gdG8gYHBsYXlgIGV2ZW50XG4gICAgICAgIEVuZ2luZSAtLT4-IFByb3ZpZGVyOiBGaXJlcyBgcGxheWAgZXZlbnRcbiAgICAgICAgUHJvdmlkZXIgLT4-IENvbnRleHQ6IFVwZGF0ZVxuICAgICAgICBDb250ZXh0IC0tPj4gVUk6IGBDb250ZXh0VXBkYXRlYFxuICAgICAgICBVSSAtPj4gVUk6IFRyaWdnZXIgYHJlbmRlcigpYFxuICAgICAgICBlbmRcbiAgICBlbHNlIFVJIFVwZGF0ZVxuICAgICAgICByZWN0IHJnYmEoMCwgMCwgMjU1LCAuMSlcbiAgICAgICAgUHJvdmlkZXIgLT4-IEVuZ2luZTogTGlzdGVuIHRvIGBwbGF5YCBldmVudFxuICAgICAgICBQcm92aWRlciAtPj4gUHJvdmlkZXI6IExpc3RlbiBmb3IgYFVzZXJQbGF5RXZlbnRgIGV2ZW50XG4gICAgICAgIFVJIC0tPj4gUHJvdmlkZXI6IEZpcmVzIGBVc2VyUGxheUV2ZW50YFxuICAgICAgICBQcm92aWRlciAtPj4gRW5naW5lOiBzZXRQYXVzZWQoZmFsc2UpXG4gICAgICAgIEVuZ2luZSAtLT4-IFByb3ZpZGVyOiBGaXJlcyBgcGxheWAgZXZlbnRcbiAgICAgICAgUHJvdmlkZXIgLT4-IENvbnRleHQ6IFVwZGF0ZVxuICAgICAgICBDb250ZXh0IC0tPj4gVUk6IGBDb250ZXh0VXBkYXRlYFxuICAgICAgICBVSSAtPj4gVUk6IFRyaWdnZXIgYHJlbmRlcigpYFxuICAgICAgICBlbmRcbiAgICBlbmQiLCJtZXJtYWlkIjp7InRoZW1lIjoiZGVmYXVsdCJ9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

## Providers

The following provides a slight overview on the provider inheritance tree.

[![](https://mermaid.ink/img/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFlvdVR1YmVQcm92aWRlclxuY2xhc3MgVmltZW9Qcm92aWRlclxuY2xhc3MgRGFpbHltb3Rpb25Qcm92aWRlclxuY2xhc3MgRW1iZWRcblxuWW91VHViZVByb3ZpZGVyIC0tIEVtYmVkOiB1c2VzXG5WaW1lb1Byb3ZpZGVyIC0tIEVtYmVkOiB1c2VzXG5EYWlseW1vdGlvblByb3ZpZGVyIC0tIEVtYmVkOiB1c2VzXG5cbmNsYXNzIE1lZGlhRW1iZWRQcm92aWRlcn5QYXJhbXNUeXBlLE1lc3NhZ2VUeXBlfiB7XG4gICAgPDxhYnN0cmFjdD4-XG4gICAgZ2V0T3JpZ2luKCkqIHN0cmluZ1xuICAgIGJ1aWxkUGFyYW1zKCkqIFBhcmFtc1R5cGVcbiAgICBnZXREZWNvZGVyKCkqIERlY29kZXJcbiAgICBnZXRQcmVjb25uZWN0aW9ucygpKlxufVxuXG5NZWRpYUVtYmVkUHJvdmlkZXIgPHwtLSBZb3VUdWJlUHJvdmlkZXI6IGV4dGVuZHNcbk1lZGlhRW1iZWRQcm92aWRlciA8fC0tIFZpbWVvUHJvdmlkZXI6IGV4dGVuZHNcbk1lZGlhRW1iZWRQcm92aWRlciA8fC0tIERhaWx5bW90aW9uUHJvdmlkZXI6IGV4dGVuZHNcblxuY2xhc3MgVmlkZW9Qcm92aWRlcn5FbmdpbmVUeXBlID0gSFRNTFZpZGVvRWxlbWVudH5cbmNsYXNzIEF1ZGlvUHJvdmlkZXJ-RW5naW5lVHlwZSA9IEhUTUxBdWRpb0VsZW1lbnR-XG5jbGFzcyBIbHNQcm92aWRlcn5FbmdpbmVUeXBlID0gSGxzflxuY2xhc3MgRGFzaFByb3ZpZGVyfkVuZ2luZVR5cGUgPSBEYXNoflxuXG5jbGFzcyBNZWRpYUZpbGVQcm92aWRlcn5FbmdpbmVUeXBlID0gSFRNTE1lZGlhRWxlbWVudH4ge1xuICAgICNtZWRpYUVsPzogSFRNTE1lZGlhRWxlbWVudFxuICAgICtzcmM6IHN0cmluZ1xuICAgICtyZWFkeVN0YXRlOiBSZWFkeVN0YXRlXG4gICAgK25ldHdvcmtTdGF0ZTogTmV0d29ya1N0YXRlXG4gICAgK2Nyb3NzT3JpZ2luPzogdHJ1ZSB8IGFub255bW91cyB8IGNyZWRlbnRpYWxzXG4gICAgK3ByZWxvYWQ_OiB0cnVlIHwgbm9uZSB8IG1ldGFkYXRhIHwgYXV0b1xuICAgICtwb3N0ZXI_OiBzdHJpbmdcbiAgICArY29udHJvbHNMaXN0Pzogc3RyaW5nXG4gICAgK2F1dG9QaVA_OiBzdHJpbmdcbiAgICArZGlzYWJsZVBpUD86IGJvb2xlYW5cbiAgICArZGlzYWJsZVJlbW90ZVBsYXliYWNrPzogYm9vbGVhblxufVxuXG5NZWRpYUZpbGVQcm92aWRlciA8fC0tIEF1ZGlvUHJvdmlkZXI6IGV4dGVuZHNcbk1lZGlhRmlsZVByb3ZpZGVyIDx8LS0gVmlkZW9Qcm92aWRlcjogZXh0ZW5kc1xuVmlkZW9Qcm92aWRlciA8fC0tIEhsc1Byb3ZpZGVyOiBleHRlbmRzXG5WaWRlb1Byb3ZpZGVyIDx8LS0gRGFzaFByb3ZpZGVyOiBleHRlbmRzXG5cbmNsYXNzIE1lZGlhUHJvdmlkZXJ-RW5naW5lVHlwZX4ge1xuICAgIDw8YWJzdHJhY3Q-PlxuICAgICtjdXJyZW50VGltZTogbnVtYmVyXG4gICAgK3ZvbHVtZTogbnVtYmVyXG4gICAgK2NvbnRyb2xzOiBib29sZWFuXG4gICAgK3BsYXlzaW5saW5lOiBib29sZWFuXG4gICAgK21lZGlhVHlwZTogTWVkaWFUeXBlXG4gICAgK3ZpZXdUeXBlOiBWaWV3VHlwZVxuICAgIC4uLlxuXG4gICAgcGxheSgpKiBQcm9taXNlfnZvaWR-XG4gICAgcGF1c2UoKSogUHJvbWlzZX52b2lkflxuICAgIGNhblBsYXkodHlwZTogc3RyaW5nKSogQ2FuUGxheVR5cGVcbiAgICBlbmdpbmUoKSogRW5naW5lVHlwZVxuICAgIHJlcXVlc3RGdWxsc2NyZWVuKCkqIFByb21pc2V-dm9pZH5cbiAgICBleGl0RnVsbHNjcmVlbigpKiBQcm9taXNlfnZvaWR-XG59XG5cbk1lZGlhUHJvdmlkZXIgPHwtLSBNZWRpYUZpbGVQcm92aWRlclxuTWVkaWFQcm92aWRlciA8fC0tIE1lZGlhRW1iZWRQcm92aWRlciIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFlvdVR1YmVQcm92aWRlclxuY2xhc3MgVmltZW9Qcm92aWRlclxuY2xhc3MgRGFpbHltb3Rpb25Qcm92aWRlclxuY2xhc3MgRW1iZWRcblxuWW91VHViZVByb3ZpZGVyIC0tIEVtYmVkOiB1c2VzXG5WaW1lb1Byb3ZpZGVyIC0tIEVtYmVkOiB1c2VzXG5EYWlseW1vdGlvblByb3ZpZGVyIC0tIEVtYmVkOiB1c2VzXG5cbmNsYXNzIE1lZGlhRW1iZWRQcm92aWRlcn5QYXJhbXNUeXBlLE1lc3NhZ2VUeXBlfiB7XG4gICAgPDxhYnN0cmFjdD4-XG4gICAgZ2V0T3JpZ2luKCkqIHN0cmluZ1xuICAgIGJ1aWxkUGFyYW1zKCkqIFBhcmFtc1R5cGVcbiAgICBnZXREZWNvZGVyKCkqIERlY29kZXJcbiAgICBnZXRQcmVjb25uZWN0aW9ucygpKlxufVxuXG5NZWRpYUVtYmVkUHJvdmlkZXIgPHwtLSBZb3VUdWJlUHJvdmlkZXI6IGV4dGVuZHNcbk1lZGlhRW1iZWRQcm92aWRlciA8fC0tIFZpbWVvUHJvdmlkZXI6IGV4dGVuZHNcbk1lZGlhRW1iZWRQcm92aWRlciA8fC0tIERhaWx5bW90aW9uUHJvdmlkZXI6IGV4dGVuZHNcblxuY2xhc3MgVmlkZW9Qcm92aWRlcn5FbmdpbmVUeXBlID0gSFRNTFZpZGVvRWxlbWVudH5cbmNsYXNzIEF1ZGlvUHJvdmlkZXJ-RW5naW5lVHlwZSA9IEhUTUxBdWRpb0VsZW1lbnR-XG5jbGFzcyBIbHNQcm92aWRlcn5FbmdpbmVUeXBlID0gSGxzflxuY2xhc3MgRGFzaFByb3ZpZGVyfkVuZ2luZVR5cGUgPSBEYXNoflxuXG5jbGFzcyBNZWRpYUZpbGVQcm92aWRlcn5FbmdpbmVUeXBlID0gSFRNTE1lZGlhRWxlbWVudH4ge1xuICAgICNtZWRpYUVsPzogSFRNTE1lZGlhRWxlbWVudFxuICAgICtzcmM6IHN0cmluZ1xuICAgICtyZWFkeVN0YXRlOiBSZWFkeVN0YXRlXG4gICAgK25ldHdvcmtTdGF0ZTogTmV0d29ya1N0YXRlXG4gICAgK2Nyb3NzT3JpZ2luPzogdHJ1ZSB8IGFub255bW91cyB8IGNyZWRlbnRpYWxzXG4gICAgK3ByZWxvYWQ_OiB0cnVlIHwgbm9uZSB8IG1ldGFkYXRhIHwgYXV0b1xuICAgICtwb3N0ZXI_OiBzdHJpbmdcbiAgICArY29udHJvbHNMaXN0Pzogc3RyaW5nXG4gICAgK2F1dG9QaVA_OiBzdHJpbmdcbiAgICArZGlzYWJsZVBpUD86IGJvb2xlYW5cbiAgICArZGlzYWJsZVJlbW90ZVBsYXliYWNrPzogYm9vbGVhblxufVxuXG5NZWRpYUZpbGVQcm92aWRlciA8fC0tIEF1ZGlvUHJvdmlkZXI6IGV4dGVuZHNcbk1lZGlhRmlsZVByb3ZpZGVyIDx8LS0gVmlkZW9Qcm92aWRlcjogZXh0ZW5kc1xuVmlkZW9Qcm92aWRlciA8fC0tIEhsc1Byb3ZpZGVyOiBleHRlbmRzXG5WaWRlb1Byb3ZpZGVyIDx8LS0gRGFzaFByb3ZpZGVyOiBleHRlbmRzXG5cbmNsYXNzIE1lZGlhUHJvdmlkZXJ-RW5naW5lVHlwZX4ge1xuICAgIDw8YWJzdHJhY3Q-PlxuICAgICtjdXJyZW50VGltZTogbnVtYmVyXG4gICAgK3ZvbHVtZTogbnVtYmVyXG4gICAgK2NvbnRyb2xzOiBib29sZWFuXG4gICAgK3BsYXlzaW5saW5lOiBib29sZWFuXG4gICAgK21lZGlhVHlwZTogTWVkaWFUeXBlXG4gICAgK3ZpZXdUeXBlOiBWaWV3VHlwZVxuICAgIC4uLlxuXG4gICAgcGxheSgpKiBQcm9taXNlfnZvaWR-XG4gICAgcGF1c2UoKSogUHJvbWlzZX52b2lkflxuICAgIGNhblBsYXkodHlwZTogc3RyaW5nKSogQ2FuUGxheVR5cGVcbiAgICBlbmdpbmUoKSogRW5naW5lVHlwZVxuICAgIHJlcXVlc3RGdWxsc2NyZWVuKCkqIFByb21pc2V-dm9pZH5cbiAgICBleGl0RnVsbHNjcmVlbigpKiBQcm9taXNlfnZvaWR-XG59XG5cbk1lZGlhUHJvdmlkZXIgPHwtLSBNZWRpYUZpbGVQcm92aWRlclxuTWVkaWFQcm92aWRlciA8fC0tIE1lZGlhRW1iZWRQcm92aWRlciIsIm1lcm1haWQiOnsidGhlbWUiOiJkZWZhdWx0In0sInVwZGF0ZUVkaXRvciI6ZmFsc2V9)

## Sync

**WIP**

Video players operate in sync to a certain degree. Changes to one player's volume or muted state
might propagate to a stored user preference or to the state of other players on the current page
(and possibly subsequent pages). The playback position of a video might need to be maintained as the
user transitions from a listing view to a detail view containing the same video. The play event of
one video might trigger pause of any other actively playing video.

The base `MediaProvider` does not need to provide/include a manager, but it should be designed
with one in mind: an ancestral component that can monitor events and access an imperative
API of registered playback components. This may/may not require a registration phase upon
connection. DOM traversal may not be sufficient means of discovery as players could be removed
and returned from the DOM in certain UIs, such as an infinite scroll.

## Context + UI

The UI are a collection of components that are self contained and connect to the `MediaProvider` via a
`Context`. The `MediaProvider` is responsible for updating the current context value, and UI
components are consumers who simply listen for updates on when a value is changed.

> See the React documentation on [Context](https://reactjs.org/docs/context.html) as a primer if you
> haven't seen this pattern before.

[![](https://mermaid.ink/img/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllclByb3BzXG5cbmNsYXNzIFBsYXllckNvbnRleHQge1xuICAgIDw8b2JqZWN0Pj5cbiAgICBwYXVzZWQ6IENvbnRleHQ8Ym9vbGVhbj5cbiAgICBjdXJyZW50VGltZTogQ29udGV4dDxudW1iZXI-XG4gICAgdm9sdW1lOiBDb250ZXh0PG51bWJlcj5cbiAgICAuLi5cbn1cblxuY2xhc3MgQ29udGV4dFByb3ZpZGVyIHtcbiAgICA8PGxpYnJhcnk-PlxufVxuXG5QbGF5ZXJDb250ZXh0IC0tPiBDb250ZXh0UHJvdmlkZXI6IHVzZXNcblBsYXllckNvbnRleHQgLS0-IFBsYXllclByb3BzOiBpbXBsZW1lbnRzXG5cbmNsYXNzIFBsYXllclxuXG5QbGF5ZXIgLS0-IFBsYXllckNvbnRleHQ6IHByb3ZpZGVzXG5cbmNsYXNzIFVJQ29tcG9uZW50XG5cblVJQ29tcG9uZW50IC0tPiBQbGF5ZXJDb250ZXh0OiBjb25zdW1lcyIsIm1lcm1haWQiOnt9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)](https://mermaid-js.github.io/mermaid-live-editor/#/edit/eyJjb2RlIjoiY2xhc3NEaWFncmFtXG5cbmNsYXNzIFBsYXllclByb3BzXG5cbmNsYXNzIFBsYXllckNvbnRleHQge1xuICAgIDw8b2JqZWN0Pj5cbiAgICBwYXVzZWQ6IENvbnRleHQ8Ym9vbGVhbj5cbiAgICBjdXJyZW50VGltZTogQ29udGV4dDxudW1iZXI-XG4gICAgdm9sdW1lOiBDb250ZXh0PG51bWJlcj5cbiAgICAuLi5cbn1cblxuY2xhc3MgQ29udGV4dFByb3ZpZGVyIHtcbiAgICA8PGxpYnJhcnk-PlxufVxuXG5QbGF5ZXJDb250ZXh0IC0tPiBDb250ZXh0UHJvdmlkZXI6IHVzZXNcblBsYXllckNvbnRleHQgLS0-IFBsYXllclByb3BzOiBpbXBsZW1lbnRzXG5cbmNsYXNzIFBsYXllclxuXG5QbGF5ZXIgLS0-IFBsYXllckNvbnRleHQ6IHByb3ZpZGVzXG5cbmNsYXNzIFVJQ29tcG9uZW50XG5cblVJQ29tcG9uZW50IC0tPiBQbGF5ZXJDb250ZXh0OiBjb25zdW1lcyIsIm1lcm1haWQiOnt9LCJ1cGRhdGVFZGl0b3IiOmZhbHNlfQ)

```ts
import createContext, { Context } from '@wcom/context';
import { PlayerProps } from './player.types.ts';

export type PlayerContext = {
  [P in keyof PlayerProps]: Context<PlayerProps<P>>;
};

export const playerContext: PlayerContext = {
  paused: createContext(false),
  currentTime: createContext(0),
  volume: createContext(30),
  // ...
};
```

```ts
import { playerContext } from './playerContext';

class MediaProvider {
  @playerContext.paused.provide();
  pausedCtx = playerContext.paused.defaultValue;

  // ...
}
```

```ts
import { playerContext } from './playerContext';

class UIComponent {
  @playerContext.paused.consume();
  paused = playerContext.paused.defaultValue;

  // ...
}
```
